/* =========================
   PONIVERSE - index styles (정리본)
   ========================= */

/* Reset & Base */
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Noto Sans KR", "Segoe UI", sans-serif;
  color: #e8f0ff;
  background: #0b1320;
}
.dark-grad { background: transparent; min-height: 100vh; }

/* 고정 배경 */
body::before{
  content:"";
  position:fixed; inset:0; z-index:-1;
  background:
    radial-gradient(1200px 600px at 20% 70%, rgba(0,120,140,.35), transparent),
    radial-gradient(600px 400px at 60% 40%, rgba(140,60,120,.25), transparent),
    #0b1320;
  background-attachment: fixed;
  background-repeat: no-repeat;
  pointer-events:none;
}

/* ===== Hero ===== */
.hero {
  display:flex; flex-direction:column; align-items:center; justify-content:flex-end;
  min-height:auto; padding:200px 16px 100px; text-align:center;
}
.hero .btn-row { margin-bottom: 0; }
.groups-warning { margin-top: 2px; }

h1 {
  font-size: 130px;
  letter-spacing: 4px;
  margin: 10px 0 6px;
  text-align: center;
}
.subtitle {
  opacity: .95; margin: 0 0 6px;
  font-size: 35px;
  font-family: 'Jua', 'Noto Sans KR', sans-serif;
  letter-spacing: 3px;
  color: #ccc;
}
.mini-counts {
  opacity: .95; margin: 0 0 20px;
  font-size: 20px;
  font-family: 'Jua', 'Noto Sans KR', sans-serif;
  letter-spacing: 1px;
  color: #ccc;
}
.mini-counts span { color: #66d1ff; font-weight: 700; }

/* ===== Title animation ===== */
@keyframes titleFly {
  0%   { opacity:0; transform: translateY(-24px) skewY(3deg) scale(.98); text-shadow:0 0 0 rgba(157,194,255,0); }
  55%  { opacity:1; transform: translateY(0) skewY(0) scale(1.02); text-shadow:0 8px 24px rgba(157,194,255,.35); }
  100% { opacity:1; transform: translateY(0) scale(1); text-shadow:0 4px 14px rgba(157,194,255,.18); }
}
@keyframes charRise {
  0% { opacity:0; transform: translateY(14px); }
  60%{ opacity:1; transform: translateY(-2px); }
  100%{ opacity:1; transform: translateY(0); }
}
.title-animate { animation: titleFly 1000ms cubic-bezier(.2,.8,.2,1) both; display:inline-block; }
.title-animate .ch { display:inline-block; opacity:0; transform:translateY(14px); animation:charRise 680ms cubic-bezier(.2,.8,.2,1) forwards; }

/* ===== Buttons ===== */
.btn-row { display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }
.btn {
  background:#9dc2ff; color:#0b1320; border:0;
  padding:10px 18px; border-radius:999px;
  font-weight:700; font-size:15px; cursor:pointer;
  box-shadow:0 6px 22px rgba(70,120,255,.3);
  transition: transform .15s ease, box-shadow .2s ease, background .2s ease, opacity .2s ease;
  min-height:44px; line-height:1.15;
}
.btn:hover  { transform: translateY(-2px); box-shadow:0 10px 26px rgba(70,120,255,.45); opacity:.98; }
.btn:active { transform: translateY(0);    box-shadow:0 6px 18px rgba(70,120,255,.35); }
.btn.ghost  { background:transparent; color:#cfe1ff; border:1px solid #4b5b78; }
.btn.primary{ background:#2b5cff; border:1px solid #2b5cff; color:#fff; }

/* ===== Gallery ===== */
.gallery {
  display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap:12px; padding:24px; max-width:1200px; margin:0 auto 72px;
}
.gallery img{
  width:100%; height:180px; object-fit:cover; border-radius:12px; cursor:pointer;
  box-shadow:0 6px 18px rgba(0,0,0,.25);
  transition: transform .2s ease, box-shadow .2s ease;
}
.gallery img:hover { transform: scale(1.03); box-shadow:0 10px 24px rgba(0,0,0,.35); }

/* ===== Generic Modal ===== */
.modal {
  position:fixed; inset:0; z-index:10000; display:none;
  background:rgba(0,0,0,.55); backdrop-filter: blur(2px);
  overflow:auto;
  padding:max(24px, env(safe-area-inset-top))
         max(16px, env(safe-area-inset-right))
         max(24px, env(safe-area-inset-bottom))
         max(16px, env(safe-area-inset-left));
}
.modal[aria-hidden="false"] { display:flex; align-items:center; justify-content:center; }
.modal-dialog {
  display:flex; flex-direction:column;
  width:min(96vw, 520px); max-height:92dvh;
  background: linear-gradient(180deg, #141a2b 0%, #0f131f 100%);
  border:1px solid rgba(70,120,255,.25); border-radius:16px;
  box-shadow:0 10px 40px rgba(0,0,0,.6), 0 0 30px rgba(70,120,255,.15);
  overflow:hidden; animation: popupFade .25s ease-out both;
}
@keyframes popupFade { from{opacity:0; transform: translateY(-20px) scale(.98);} to{opacity:1; transform:none;} }
.modal-header{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 16px; border-bottom:1px solid rgba(70,120,255,.2);
  background: linear-gradient(180deg, rgba(24,36,62,1) 0%, rgba(16,22,38,1) 100%);
  color:#eaf1ff;
}
.modal-header h2{ margin:0; font-size:18px; letter-spacing:.3px; }
.modal-close{
  background:#1b2740; border:1px solid rgba(120,160,255,.35); color:#dbe7ff;
  border-radius:50%; width:36px; height:36px; font-size:18px; cursor:pointer;
  box-shadow:0 3px 8px rgba(0,0,0,.4);
}
.modal-close:hover{ filter:brightness(1.1); }
.modal-body{ padding:18px; display:grid; gap:12px; overflow:auto; flex:1 1 auto; }
.modal-body label{ display:grid; gap:6px; text-align:left; font-size:14px; color:#dce4ef; margin:8px 0; }
.modal-body input, .modal-body select{
  background:#121720; color:#fff; border:1px solid rgba(90,120,180,.5);
  border-radius:10px; padding:10px 12px; outline:none;
  transition: border-color .15s ease, box-shadow .2s ease; font-size:16px;
}
.modal-body input:focus, .modal-body select:focus{
  border-color:#6aa2ff; box-shadow:0 0 10px rgba(106,162,255,.3);
}
.modal-actions{
  flex:0 0 auto; display:flex; flex-wrap:wrap; gap:10px; justify-content:center;
  padding:10px 12px 14px; min-width:0;
}
.modal-actions .btn, .modal-actions .group-btn{
  flex:1 1 160px; min-width:120px; max-width:100%; text-align:center;
}

/* ===== Toast ===== */
.toast{
  position:fixed; top:50%; left:50%; transform:translate(-50%,-50%);
  background:rgba(20,25,35,.95); color:#fff; padding:16px 24px;
  border:1px solid rgba(90,120,200,.4); border-radius:12px; display:none;
  font-size:16px; font-weight:500; z-index:999999; pointer-events:none;
  box-shadow:0 8px 24px rgba(0,0,0,.6), 0 0 0 1px rgba(80,120,255,.2) inset;
}
.toast.show{ display:block; animation: fadeToast .3s ease-out, hideToast .3s ease-in 1.8s forwards; }
@keyframes fadeToast { from{opacity:0; transform:translate(-50%,-40%);} to{opacity:1; transform:translate(-50%,-50%);} }
@keyframes hideToast { to{opacity:0; transform:translate(-50%,-40%);} }

/* ===== Image Modal (이미지 크기에 맞게 + 플로팅 X, 스크롤바 제거) ===== */
#imgModal{
  position: fixed;
  inset: 0;
  z-index: 10000;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.75);
  backdrop-filter: blur(4px);
  padding: 0;
  overflow: hidden;              /* ✅ 전체 오버레이에서 스크롤 안 생기게 */
}
#imgModal:not([hidden]){ display: flex; }

#imgModal .modal-body{
  position: relative;
  display: inline-block;         /* ✅ 이미지 크기만큼만 차지 */
  padding: 0;
  margin: 0;
  background: transparent;
  box-shadow: none;
  flex: 0 0 auto !important;
  width: fit-content;
  height: fit-content;
  overflow: visible;             /* ✅ 버튼이 살짝 겹쳐도 잘리지 않게 */
}

#imgModal img{
  max-width: 94vw;
  max-height: 88dvh;
  width: auto;
  height: auto;
  object-fit: contain;
  border-radius: 10px;
  background: #0b1320;
  box-shadow: 0 0 20px rgba(0,0,0,.6);
}

/* ✅ 닫기 버튼: 이미지 모서리 기준으로 배치 후 translate로 '겹쳐 보이게'
   (transform은 레이아웃 크기에 영향을 주지 않아 스크롤바가 안 생김) */
#imgModal .modal-close{
  position: absolute;
  top: 0;                         /* 이미지 박스 우상단 모서리 */
  right: 0;
  transform: translate(50%,-50%); /* 모서리 밖으로 살짝 띄우기 */
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1px solid rgba(120,160,255,.35);
  background: rgba(25,30,50,.95);
  color: #eaf1ff;
  font-size: 20px;
  line-height: 38px;
  text-align: center;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0,0,0,.5), 0 0 0 1px rgba(80,120,255,.2) inset;
  transition: transform .2s ease, filter .2s ease;
  z-index: 30;
}
#imgModal .modal-close:hover{ transform: translate(50%,-50%) scale(1.08); filter: brightness(1.2); }



/* ===== Groups (로그인 후 표시) ===== */
.groups{
  display:none; grid-template-columns: repeat(4, minmax(220px, 1fr));
  gap:16px; padding:24px; max-width:1200px; margin:12px auto 120px;
}
.groups[aria-hidden="false"]{ display:grid; }

.group-card{
  position:relative;
  background: linear-gradient(180deg, #141a2b 0%, #0f131f 100%);
  border:1px solid rgba(70,120,255,.2); border-radius:14px; overflow:hidden;
  box-shadow:0 8px 22px rgba(0,0,0,.35);
  transition: transform .18s ease, box-shadow .18s ease;
}
.group-card:hover{ transform: translateY(-4px); box-shadow:0 12px 28px rgba(0,0,0,.45); }

.group-thumb{ display:block; width:100%; height:160px; object-fit:cover; pointer-events:auto; }
.group-card > a, .group-actions a.group-btn{ position:relative; z-index:5; pointer-events:auto; cursor:pointer; }

.group-body{ padding:12px; display:grid; gap:10px; }
.group-title{ display:inline-flex; align-items:center; gap:8px; line-height:1.2; }
.group-title .badge{
  display:inline-flex; align-items:center; height:20px; padding:0 8px; border-radius:10px;
  font-size:12px; font-weight:700; vertical-align:middle;
}
.group-title .badge.optional{ background:rgba(100,180,255,.25); border:1px solid rgba(100,180,255,.6); color:#9dc2ff; }
.group-title .badge.required{ background:rgba(255,80,80,.25); border:1px solid rgba(255,80,80,.6); color:#ff6b6b; }

.group-actions{ display:flex; align-items:center; gap:10px; }
.group-actions [data-status]{ order:0; }
.group-actions .move-btn{ order:1; }
.group-actions .group-btn{ order:2; }

.group-actions .group-btn{
  background-color:#4fa8ff; border:none; border-radius:8px; color:#fff;
  padding:6px 12px; font-size:.9rem; cursor:pointer; transition:.2s; text-decoration:none;
  /* ↓↓↓ 이 세 줄이 핵심 */
  display:inline-flex;
  align-items:center;
  justify-content:center;

  min-height:44px; line-height:1.15;
}

.group-actions .group-btn:hover{ background-color:#1c7eff; }
.group-actions .withdraw-btn{ background-color:#ff4d4d; }
.group-actions .withdraw-btn:hover{ background-color:#e63939; }

/* 모임 경고 배너 */
.groups-warning{
  display:none; max-width:1200px; margin:0 auto; padding:6px 12px;
  border:none; border-radius:10px; background:rgba(255,255,255,.05);
  color:#ccc; font-size:20px; text-align:center; transition:opacity .2s ease;
}
.groups-warning[aria-hidden="false"]{ display:block; opacity:1; }

/* 하단 페이지 액션 */
.page-actions{ max-width:1200px; margin:16px auto 48px; padding:0 24px; display:flex; justify-content:flex-end; }
.page-actions[aria-hidden="true"]{ display:none; }
.page-actions .withdraw-btn{
  padding:12px 16px; border-radius:999px; font-weight:800; cursor:pointer;
  background:linear-gradient(180deg, #77273a, #5c1e2d);
  color:#fff; border:1px solid rgba(255,120,140,.55);
  box-shadow:0 10px 24px rgba(0,0,0,.45);
}
.page-actions .withdraw-btn:hover{ filter:brightness(1.06); }

/* ===== Auth-gated visibility ===== */
#groups, #groupsNotice, .page-actions { display:none; }
body[data-auth="in"] #groups { display:grid; }
body[data-auth="in"] #groupsNotice { display:block; }
body[data-auth="in"] .page-actions { display:flex; }

/* ===== Responsive ===== */
@media (max-width: 1024px){
  .groups { grid-template-columns: repeat(3, minmax(0, 1fr)); }
}
@media (max-width: 900px){
  h1 { font-size: 84px; }
}
@media (max-width: 768px){
  .hero { padding:120px 16px 56px; }
  .groups { grid-template-columns: repeat(2, minmax(0, 1fr)); gap:12px; }
  .group-thumb { height:140px; }
}
@media (max-width: 600px){
  h1 { font-size: 56px; letter-spacing: 2px; }
  .gallery { grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); }
  .gallery img { height: 140px; }
  .modal-dialog { width:min(94vw, 520px); margin:4vh auto; max-height:calc(100vh - 8vh); }
}
@media (max-width: 480px){
  .groups { grid-template-columns:1fr; gap:10px; }
  .group-body { padding:10px; }
  .modal-actions .btn, .modal-actions .group-btn{ flex:1 0 100%; width:100%; }
}

/* === 모바일 최적화 보강 === */
.dark-grad { min-height: 100dvh; }            /* 주소창 높이 변화 대응 */
h1 { font-size: clamp(40px, 10vw, 130px); }   /* 유연한 타이포 */
.subtitle { font-size: clamp(16px, 4.5vw, 35px); }
.mini-counts { font-size: clamp(13px, 3.6vw, 20px); }

/* iOS 키보드/주소창 대응 */
.signup-page .hero { padding: 10dvh 16px 3dvh; }

/* 모션 최소화 환경 배려 */
@media (prefers-reduced-motion: reduce){
  * { animation:none !important; transition:none !important; }
}
